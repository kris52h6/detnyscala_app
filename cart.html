<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      h1 {
        margin-top: 30px;
        margin-bottom: 40px;
      }

      body {
        margin-left: 15px;
        margin-right: 15px;
      }

      h2 {
        margin-top: 30px;
      }

      .total {
        text-align: right;
      }
    </style>
  </head>
  <body>
    <h1>Kurv</h1>
    <section id="cartlist"></section>
    <template>
      <h2></h2>
      <h3></h3>
    </template>
    <div class="total">
      <h2>Total:</h2>
      <h3></h3>
    </div>
    <button class="proceed">Betaling</button>
    <a href="index.html">
      <button class="continue">Tilbage</button>
    </a>
  </body>
  <script>
    "use strict";

    window.addEventListener("DOMContentLoaded", init);
    let currentOrder = localStorage.getItem("order");
    let cartlist = document.querySelector("#cartlist");

    function init() {
      document.querySelector(".proceed").addEventListener("click", () => {
        window.location.replace("checkout.html");
      });
      let order = JSON.parse(currentOrder);
      console.log(order);
      const skabelon = document.querySelector("template");
      console.log(currentOrder);
      order.forEach((order) => {
        const klon = skabelon.cloneNode(true).content;
        klon.querySelector("h2").textContent = order.name;
        klon.querySelector("h3").textContent = "x" + order.amount;
        // klon.querySelector("h2").textContent = order.amount;

        // klon.querySelector(".remove").addEventListener("click", () => {
        //   removeBeer(orderParse, order);
        // });

        cartlist.appendChild(klon);
      });

      let orderPrice = 0;
      for (let i = 0; i < order.length; i++) {
        orderPrice = +order[i].amount + orderPrice;
        console.log(orderPrice);
      }
      document.querySelector("body > div.total > h3").textContent = orderPrice * 49 + " DKK";
    }
  </script>
</html>
