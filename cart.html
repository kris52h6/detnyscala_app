<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart</title>
    <link rel="stylesheet" href="style.css" />

    <style>
      h1 {
        font-size: 3rem;
        margin-top: 30px;
        margin-bottom: 40px;
        font-family: "Bebas Neue", cursive;
      }

      body {
        margin-left: 15px;
        margin-right: 15px;
      }

      .order_wrapper {
        background-color: #f2a6a6;
        border: black 1px solid;
        /* margin: 10px; */
        padding: 10px;
        width: 100%;

        display: flex;
        align-items: center;
      }

      .order_wrapper h3 {
        align-self: flex-end;
        margin-left: 20px;
      }

      .total {
        text-align: right;
      }
    </style>
  </head>
  <body>
    <h1>Kurv</h1>
    <section id="cartlist"></section>
    <template>
      <div class="order_wrapper">
        <h2></h2>
        <h3></h3>
      </div>
    </template>
    <div class="total">
      <h2>Total:</h2>
      <h3></h3>
    </div>
    <button class="proceed">Betaling</button>
    <a href="index.html">
      <button class="continue">Tilbage</button>
    </a>
  </body>
  <script>
    "use strict";

    window.addEventListener("DOMContentLoaded", init);
    let currentOrder = localStorage.getItem("order");
    const cartlist = document.querySelector("#cartlist");
    const skabelon = document.querySelector("template");

    function init() {
      document.querySelector(".proceed").addEventListener("click", () => {
        window.location.replace("checkout.html");
      });
      let order = JSON.parse(currentOrder);
      console.log(order);
      order.forEach((order) => {
        const klon = skabelon.cloneNode(true).content;
        klon.querySelector("h2").textContent = order.name;
        klon.querySelector("h3").textContent = "x" + order.amount;

        // klon.querySelector(".remove").addEventListener("click", () => {
        //   removeBeer(orderParse, order);
        // });

        cartlist.appendChild(klon);
      });

      let totalPrice = 0;
      for (let i = 0; i < order.length; i++) {
        totalPrice = +order[i].amount * order[i].price + totalPrice;
      }
      document.querySelector("body > div.total > h3").textContent = totalPrice + " DKK";
    }
  </script>
</html>
