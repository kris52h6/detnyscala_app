<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Det Ny Scala Checkout</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    
  </head>
  
  <body>
    <style>
        body {
            margin-left: 20px;
            margin-right: 20px;
        }

        h1 {
            padding-top: 50px;
        }
        h2 {
            text-align: center;
        }
    </style>
    <div class="title">
      <a href="cart.html" class="arrowback">←</a>
      <h1>Betaling</h1>

    </div>

    <div id="form_wrap">
      <section id="subscribe_form">
        <form>
          <!-- <form action="test.html" method="POST"> -->
            <div class="form-group">
          <label for="name">Navn</label>
          <input type="text" id="name" placeholder="John Doe"  minlength="4" required data-pristine-required-message="Name must have atleast 4 characters"  />
        </div>
        <div class="form-group">

          <label for="cardnumber">Kortnummer</label>
          <input type="number" id="cardnumber" placeholder="1234 5678 3456 2456" value="" minlength="16" maxlength="16" required data-pristine-required-message="Cardnumber must be 16 characters"  />
        </div>

          <div class="details_wrapper">
            <div class="form-group">
            <div class="expire">
              <label for="expire">EXPIRE</label>
              <input type="number" id="expire" placeholder="05 / 21" value="" minlength="4" maxlength="4" required data-pristine-required-message="Must have 2 dates" />
            </div>
            </div>

            <div class="cvc">
              <div class="form-group">
              <label for="cvc">CVC</label>
              <input type="text" id="cvc" placeholder="123" minlength="3" maxlength="3" required data-pristine-required-message="CVC must be 3 characters" />
            </div>
            </div>    
          </div>
        
          <label for="fname">Accepted Cards</label>
            <div class="icon_container">
              <img src="img/visa.png">
              <img src="img/mastercard.png">
          <input type="submit" value="Accepter" />
        </form>
      </section>


      <a href="cart.html">
        <button class="continue">Tilbage</button>
      </a>
    </div>
    <div class="purchaseModal">
      <h1>Tak for dit køb!</h1>
      <div class="loadingbars">
        <h2>Omdirigere til forsiden</h2>

        <div class="loading"></div>
        <div class="loading"></div>
        <div class="loading"></div>
      </div>
    </div>
  </body>
  <script>
      "use strict";

document.addEventListener("DOMContentLoaded", init);

function init() {
  postFunction();
}

// henter ordren fra local storage, og tilføjer click på accept knappen, som kalder postBeer
function postFunction() {
  const form = document.querySelector("form");
  let currentOrder = localStorage.getItem("order");
form.addEventListener("submit", (e) => {
    e.preventDefault();
    postBeer();
});

}

// poster data fra localStorage (som er kundens køb)
function postBeer() {
    document.querySelector("#form_wrap").style.display = "none";
  document.querySelector(".purchaseModal").style.display = "flex";

  setInterval(() => {
    window.location.replace("index.html");
    localStorage.clear();
  }, 3000);
}


  </script>

</html>
